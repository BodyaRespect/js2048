!function(){function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var n=[],t=0,r=!1,o=document.querySelector(".tileContainer"),i=document.getElementById("scoreElement"),a=document.getElementById("alert");function l(){for(var e=0;e<4;e++){for(var t=[],r=0;r<4;r++)t.push(0);n.push(t)}}function s(){a.style.display="none",o.innerHTML="",i.innerHTML=0,n=[],t=0,r=!1,window.addEventListener("keydown",c),l(),y(),y()}function u(){a.style.display="none",window.addEventListener("keydown",c)}function c(e){var t;switch(e.key){case"ArrowUp":t=m(1,0);break;case"ArrowDown":t=m(-1,0);break;case"ArrowLeft":t=m(0,-1);break;case"ArrowRight":t=m(0,1)}if(t){y();var o=function(){for(var e=!1,t=0;t<n.length;t++)for(var o=0;o<n[t].length;o++){if(0===n[t][o]&&(e=!0),2048===n[t][o]&&!r)return{gameOver:!0,message:"You won!"};3!==o&&n[t][o]===n[t][o+1]&&(e=!0),3!==t&&n[t][o]===n[t+1][o]&&(e=!0)}return e?{gameOver:!1,message:""}:{gameOver:!0,message:"Game over!"}}();o.gameOver&&function(e){if(a.innerHTML="","Game over!"===e||"You won!"===e){var n,t=[{text:"Game over!"===e?"Try again":"New game",handler:s}];"You won!"===e&&(t.push({text:"Continue",handler:u}),r=!0,window.removeEventListener("keydown",c));var o=(n=document.createElement("div"),a.innerText=e,t.forEach(function(e){var t=document.createElement("button");t.innerText=e.text,t.onclick=e.handler,n.appendChild(t)}),n);a.appendChild(o)}a.style.display="flex",a.style.flexDirection="column"}(o.message)}}function d(e,n,t){return e<=t&&1===n||e>=0&&-1===n}function m(e,r){var o=!1,a=!1;if(0!==r)for(var l=1===r?3:0,s=1===r?-1:1,u=0;u<4;u++)for(var c=l;d(c,s,3);){if(0===n[u][c]){c+=s;continue}var m=v(u,c,0,r),f=".row"+(u+1)+".column"+(c+1),y=document.querySelector(f);if(!m.merge||m.merge&&a){a=!1,m.destinationX+=m.merge?s:0,n[u][m.destinationX]=n[u][c],m.destinationX!==c&&(o=!0,n[u][c]=0),g(u,m.destinationX,y,!1),c+=s;continue}a=!0,n[u][m.destinationX]=2*n[u][c],t+=n[u][m.destinationX],i.innerHTML=t,o=!0,n[u][c]=0,g(u,m.destinationX,y,m.merge),c+=s}else if(0!==e)for(var h=1===e?3:0,w=1===e?-1:1,p=0;p<4;p++)for(var L=h;d(L,w,3);){if(0===n[L][p]){L+=w;continue}var E=v(L,p,e,0),b=".row"+(L+1)+".column"+(p+1),A=document.querySelector(b);if(!E.merge||E.merge&&a){a=!1,E.destinationY+=E.merge?w:0,n[E.destinationY][p]=n[L][p],E.destinationY!==L&&(o=!0,n[L][p]=0),g(E.destinationY,p,A,!1),L+=w;continue}a=!0,n[E.destinationY][p]=2*n[L][p],t+=n[E.destinationY][p],i.innerHTML=t,o=!0,n[L][p]=0,g(E.destinationY,p,A,E.merge),L+=w}return o}function f(e,n,t,r){return 1===e&&n<t&&!r||-1===e&&n>0&&!r}function v(e,t,r,o){for(var i=e,a=t,l=!1;f(r,i,3,l)||f(o,a,3,l);){var s=i+r,u=a+o,c=n[s][u],d=n[e][t];if(l)break;if(0===c||c===d)i=s,a=u,l=c===d;else if(0!==c&&c!==d)break}return{merge:l,destinationY:i,destinationX:a}}function g(e,t,r,i){if(Array.from(r.classList).forEach(function(e){(e.startsWith("row")||e.startsWith("column"))&&r.classList.remove(e)}),r.classList.add("row"+(e+1),"column"+(t+1)),i){for(var a=o.querySelectorAll(".row"+(e+1)+".column"+(t+1));a.length>1;)o.removeChild(a[0]),a=o.querySelectorAll(".row"+(e+1)+".column"+(t+1));a[0].className="tile row"+(e+1)+" column"+(t+1)+" value"+n[e][t],a[0].innerHTML=n[e][t],a[0].classList.add("merged"),a[0].addEventListener("animationend",function(){return r.classList.remove("merged")})}}function y(){for(var t,r,i,a=[],l=0;l<n.length;l++)for(var s=0;s<n[l].length;s++)0===n[l][s]&&a.push([l,s]);var u=function(e){if(Array.isArray(e))return e}(t=a[Math.floor(Math.random()*a.length)])||function(e,n){var t,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(t=o.next()).done)&&(i.push(t.value),2!==i.length);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw r}}return i}}(t,2)||function(n,t){if(n){if("string"==typeof n)return e(n,2);var r=Object.prototype.toString.call(n).slice(8,-1);if("Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(n,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=u[0],d=u[1];n[c][d]=.9>Math.random()?2:4,r=n[c][d],(i=document.createElement("div")).classList.add("tile","row"+(c+1),"column"+(d+1),"value"+r),i.innerHTML=r,o.appendChild(i),i.classList.add("merged"),i.addEventListener("animationend",function(){return i.classList.remove("merged")})}document.getElementById("newGame").addEventListener("click",s),l(),y(),y(),window.addEventListener("keydown",c)}();
//# sourceMappingURL=index.f8d67adb.js.map
