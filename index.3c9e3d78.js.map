{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["var $09e991522ca7e64e$exports = {};\n\"use strict\";\nconst $09e991522ca7e64e$var$DIRECTION_UP = \"ArrowUp\";\nconst $09e991522ca7e64e$var$DIRECTION_DOWN = \"ArrowDown\";\nconst $09e991522ca7e64e$var$DIRECTION_LEFT = \"ArrowLeft\";\nconst $09e991522ca7e64e$var$DIRECTION_RIGHT = \"ArrowRight\";\nlet $09e991522ca7e64e$var$board = [];\nlet $09e991522ca7e64e$var$score = 0;\nlet $09e991522ca7e64e$var$wonGame = false;\nconst $09e991522ca7e64e$var$tileContainer = document.querySelector(\".tileContainer\");\nconst $09e991522ca7e64e$var$scoreElement = document.getElementById(\"scoreElement\");\nconst $09e991522ca7e64e$var$alertElement = document.getElementById(\"alert\");\ndocument.getElementById(\"newGame\").addEventListener(\"click\", $09e991522ca7e64e$var$startNewGame);\n$09e991522ca7e64e$var$createBoard();\n$09e991522ca7e64e$var$addRandomTile();\n$09e991522ca7e64e$var$addRandomTile();\nfunction $09e991522ca7e64e$var$createBoard() {\n    for(let i = 0; i < 4; i++){\n        const row = [];\n        for(let j = 0; j < 4; j++)row.push(0);\n        $09e991522ca7e64e$var$board.push(row);\n    }\n}\nfunction $09e991522ca7e64e$var$startNewGame() {\n    $09e991522ca7e64e$var$alertElement.style.display = \"none\";\n    $09e991522ca7e64e$var$tileContainer.innerHTML = \"\";\n    $09e991522ca7e64e$var$scoreElement.innerHTML = 0;\n    $09e991522ca7e64e$var$board = [];\n    $09e991522ca7e64e$var$score = 0;\n    $09e991522ca7e64e$var$wonGame = false;\n    window.addEventListener(\"keydown\", $09e991522ca7e64e$var$onDirectionKeyPress);\n    $09e991522ca7e64e$var$createBoard();\n    $09e991522ca7e64e$var$addRandomTile();\n    $09e991522ca7e64e$var$addRandomTile();\n}\nfunction $09e991522ca7e64e$var$continuePlaying() {\n    $09e991522ca7e64e$var$alertElement.style.display = \"none\";\n    window.addEventListener(\"keydown\", $09e991522ca7e64e$var$onDirectionKeyPress);\n}\nwindow.addEventListener(\"keydown\", $09e991522ca7e64e$var$onDirectionKeyPress);\nfunction $09e991522ca7e64e$var$onDirectionKeyPress(argument) {\n    let movePossible;\n    switch(argument.key){\n        case $09e991522ca7e64e$var$DIRECTION_UP:\n            movePossible = $09e991522ca7e64e$var$moveTiles(1, 0);\n            break;\n        case $09e991522ca7e64e$var$DIRECTION_DOWN:\n            movePossible = $09e991522ca7e64e$var$moveTiles(-1, 0);\n            break;\n        case $09e991522ca7e64e$var$DIRECTION_LEFT:\n            movePossible = $09e991522ca7e64e$var$moveTiles(0, -1);\n            break;\n        case $09e991522ca7e64e$var$DIRECTION_RIGHT:\n            movePossible = $09e991522ca7e64e$var$moveTiles(0, 1);\n            break;\n    }\n    if (movePossible) {\n        $09e991522ca7e64e$var$addRandomTile();\n        const gameOver = $09e991522ca7e64e$var$isGameOver();\n        if (gameOver.gameOver) $09e991522ca7e64e$var$showAlert(gameOver.message);\n    }\n}\nfunction $09e991522ca7e64e$var$isWithinBounds(index, step, limit) {\n    return index <= limit && step === 1 || index >= 0 && step === -1;\n}\nfunction $09e991522ca7e64e$var$moveTiles(directionY, directionX) {\n    let movePossible = false;\n    let mergedRecently = false;\n    if (directionX !== 0) {\n        const startX = directionX === 1 ? 3 : 0;\n        const stepX = directionX === 1 ? -1 : 1;\n        for(let i = 0; i < 4; i++){\n            let j = startX;\n            while($09e991522ca7e64e$var$isWithinBounds(j, stepX, 3)){\n                if ($09e991522ca7e64e$var$board[i][j] === 0) {\n                    j += stepX;\n                    continue;\n                }\n                const destination = $09e991522ca7e64e$var$getDestinationSquare(i, j, 0, directionX);\n                const tileClass = \".row\" + (i + 1) + \".column\" + (j + 1);\n                const tile = document.querySelector(tileClass);\n                if (!destination.merge || destination.merge && mergedRecently) {\n                    mergedRecently = false;\n                    destination.destinationX += destination.merge ? stepX : 0;\n                    $09e991522ca7e64e$var$board[i][destination.destinationX] = $09e991522ca7e64e$var$board[i][j];\n                    if (destination.destinationX !== j) {\n                        movePossible = true;\n                        $09e991522ca7e64e$var$board[i][j] = 0;\n                    }\n                    $09e991522ca7e64e$var$moveTileOnPage(i, destination.destinationX, tile, false);\n                    j += stepX;\n                    continue;\n                }\n                mergedRecently = true;\n                $09e991522ca7e64e$var$board[i][destination.destinationX] = $09e991522ca7e64e$var$board[i][j] * 2;\n                $09e991522ca7e64e$var$score += $09e991522ca7e64e$var$board[i][destination.destinationX];\n                $09e991522ca7e64e$var$scoreElement.innerHTML = $09e991522ca7e64e$var$score;\n                movePossible = true;\n                $09e991522ca7e64e$var$board[i][j] = 0;\n                $09e991522ca7e64e$var$moveTileOnPage(i, destination.destinationX, tile, destination.merge);\n                j += stepX;\n            }\n        }\n    } else if (directionY !== 0) {\n        const startY = directionY === 1 ? 3 : 0;\n        const stepY = directionY === 1 ? -1 : 1;\n        for(let j = 0; j < 4; j++){\n            let i = startY;\n            while($09e991522ca7e64e$var$isWithinBounds(i, stepY, 3)){\n                if ($09e991522ca7e64e$var$board[i][j] === 0) {\n                    i += stepY;\n                    continue;\n                }\n                const destination = $09e991522ca7e64e$var$getDestinationSquare(i, j, directionY, 0);\n                const tileClass = \".row\" + (i + 1) + \".column\" + (j + 1);\n                const tile = document.querySelector(tileClass);\n                if (!destination.merge || destination.merge && mergedRecently) {\n                    mergedRecently = false;\n                    destination.destinationY += destination.merge ? stepY : 0;\n                    $09e991522ca7e64e$var$board[destination.destinationY][j] = $09e991522ca7e64e$var$board[i][j];\n                    if (destination.destinationY !== i) {\n                        movePossible = true;\n                        $09e991522ca7e64e$var$board[i][j] = 0;\n                    }\n                    $09e991522ca7e64e$var$moveTileOnPage(destination.destinationY, j, tile, false);\n                    i += stepY;\n                    continue;\n                }\n                mergedRecently = true;\n                $09e991522ca7e64e$var$board[destination.destinationY][j] = $09e991522ca7e64e$var$board[i][j] * 2;\n                $09e991522ca7e64e$var$score += $09e991522ca7e64e$var$board[destination.destinationY][j];\n                $09e991522ca7e64e$var$scoreElement.innerHTML = $09e991522ca7e64e$var$score;\n                movePossible = true;\n                $09e991522ca7e64e$var$board[i][j] = 0;\n                $09e991522ca7e64e$var$moveTileOnPage(destination.destinationY, j, tile, destination.merge);\n                i += stepY;\n            }\n        }\n    }\n    return movePossible;\n}\nfunction $09e991522ca7e64e$var$shouldContinue(direction, current, limit, merge) {\n    return direction === 1 && current < limit && !merge || direction === -1 && current > 0 && !merge;\n}\nfunction $09e991522ca7e64e$var$getDestinationSquare(i, j, directionY, directionX) {\n    let destinationY = i;\n    let destinationX = j;\n    let merge = false;\n    while($09e991522ca7e64e$var$shouldContinue(directionY, destinationY, 3, merge) || $09e991522ca7e64e$var$shouldContinue(directionX, destinationX, 3, merge)){\n        const nextY = destinationY + directionY;\n        const nextX = destinationX + directionX;\n        const nextCell = $09e991522ca7e64e$var$board[nextY][nextX];\n        const currentCell = $09e991522ca7e64e$var$board[i][j];\n        if (merge) break;\n        if (nextCell === 0 || nextCell === currentCell) {\n            destinationY = nextY;\n            destinationX = nextX;\n            merge = nextCell === currentCell;\n        } else if (nextCell !== 0 && nextCell !== currentCell) break;\n    }\n    return {\n        merge: merge,\n        destinationY: destinationY,\n        destinationX: destinationX\n    };\n}\nfunction $09e991522ca7e64e$var$moveTileOnPage(row, column, tile, merge) {\n    const classes = Array.from(tile.classList);\n    classes.forEach((className)=>{\n        if (className.startsWith(\"row\") || className.startsWith(\"column\")) tile.classList.remove(className);\n    });\n    tile.classList.add(\"row\" + (row + 1), \"column\" + (column + 1));\n    if (merge) {\n        let elements = $09e991522ca7e64e$var$tileContainer.querySelectorAll(\".row\" + (row + 1) + \".column\" + (column + 1));\n        while(elements.length > 1){\n            $09e991522ca7e64e$var$tileContainer.removeChild(elements[0]);\n            elements = $09e991522ca7e64e$var$tileContainer.querySelectorAll(\".row\" + (row + 1) + \".column\" + (column + 1));\n        }\n        elements[0].className = \"tile row\" + (row + 1) + \" column\" + (column + 1) + \" \" + \"value\" + $09e991522ca7e64e$var$board[row][column];\n        elements[0].innerHTML = $09e991522ca7e64e$var$board[row][column];\n        elements[0].classList.add(\"merged\");\n        elements[0].addEventListener(\"animationend\", ()=>tile.classList.remove(\"merged\"));\n    }\n}\nfunction $09e991522ca7e64e$var$addTileToPage(row, column, value) {\n    const tile = document.createElement(\"div\");\n    tile.classList.add(\"tile\", \"row\" + (row + 1), \"column\" + (column + 1), \"value\" + value);\n    tile.innerHTML = value;\n    $09e991522ca7e64e$var$tileContainer.appendChild(tile);\n    tile.classList.add(\"merged\");\n    tile.addEventListener(\"animationend\", ()=>tile.classList.remove(\"merged\"));\n}\nfunction $09e991522ca7e64e$var$addRandomTile() {\n    const emptyTiles = [];\n    for(let i = 0; i < $09e991522ca7e64e$var$board.length; i++){\n        for(let j = 0; j < $09e991522ca7e64e$var$board[i].length; j++)if ($09e991522ca7e64e$var$board[i][j] === 0) emptyTiles.push([\n            i,\n            j\n        ]);\n    }\n    const [randomI, randomJ] = emptyTiles[Math.floor(Math.random() * emptyTiles.length)];\n    $09e991522ca7e64e$var$board[randomI][randomJ] = Math.random() < 0.9 ? 2 : 4;\n    $09e991522ca7e64e$var$addTileToPage(randomI, randomJ, $09e991522ca7e64e$var$board[randomI][randomJ]);\n}\nfunction $09e991522ca7e64e$var$isGameOver() {\n    let emptySquare = false;\n    for(let i = 0; i < $09e991522ca7e64e$var$board.length; i++)for(let j = 0; j < $09e991522ca7e64e$var$board[i].length; j++){\n        if ($09e991522ca7e64e$var$board[i][j] === 0) emptySquare = true;\n        if ($09e991522ca7e64e$var$board[i][j] === 2048 && !$09e991522ca7e64e$var$wonGame) return {\n            gameOver: true,\n            message: \"You won!\"\n        };\n        if (j !== 3 && $09e991522ca7e64e$var$board[i][j] === $09e991522ca7e64e$var$board[i][j + 1]) emptySquare = true;\n        if (i !== 3 && $09e991522ca7e64e$var$board[i][j] === $09e991522ca7e64e$var$board[i + 1][j]) emptySquare = true;\n    }\n    if (emptySquare) return {\n        gameOver: false,\n        message: \"\"\n    };\n    return {\n        gameOver: true,\n        message: \"Game over!\"\n    };\n}\nfunction $09e991522ca7e64e$var$createAlert(divText, buttons) {\n    const alertedElement = document.createElement(\"div\");\n    $09e991522ca7e64e$var$alertElement.innerText = divText;\n    buttons.forEach((button)=>{\n        const alertedButton = document.createElement(\"button\");\n        alertedButton.innerText = button.text;\n        alertedButton.onclick = button.handler;\n        alertedElement.appendChild(alertedButton);\n    });\n    return alertedElement;\n}\nfunction $09e991522ca7e64e$var$showAlert(message) {\n    $09e991522ca7e64e$var$alertElement.innerHTML = \"\";\n    if (message === \"Game over!\" || message === \"You won!\") {\n        const buttons = [\n            {\n                text: message === \"Game over!\" ? \"Try again\" : \"New game\",\n                handler: $09e991522ca7e64e$var$startNewGame\n            }\n        ];\n        if (message === \"You won!\") {\n            buttons.push({\n                text: \"Continue\",\n                handler: $09e991522ca7e64e$var$continuePlaying\n            });\n            $09e991522ca7e64e$var$wonGame = true;\n            window.removeEventListener(\"keydown\", $09e991522ca7e64e$var$onDirectionKeyPress);\n        }\n        const alertDiv = $09e991522ca7e64e$var$createAlert(message, buttons);\n        $09e991522ca7e64e$var$alertElement.appendChild(alertDiv);\n    }\n    $09e991522ca7e64e$var$alertElement.style.display = \"flex\";\n    $09e991522ca7e64e$var$alertElement.style.flexDirection = \"column\";\n}\n\n\n//# sourceMappingURL=index.3c9e3d78.js.map\n","'use strict';\n\nconst DIRECTION_UP = 'ArrowUp';\nconst DIRECTION_DOWN = 'ArrowDown';\nconst DIRECTION_LEFT = 'ArrowLeft';\nconst DIRECTION_RIGHT = 'ArrowRight';\n\nlet board = [];\nlet score = 0;\nlet wonGame = false;\n\nconst tileContainer = document.querySelector('.tileContainer');\nconst scoreElement = document.getElementById('scoreElement');\nconst alertElement = document.getElementById('alert');\n\ndocument.getElementById('newGame').addEventListener('click', startNewGame);\n\ncreateBoard();\naddRandomTile();\naddRandomTile();\n\nfunction createBoard() {\n  for (let i = 0; i < 4; i++) {\n    const row = [];\n\n    for (let j = 0; j < 4; j++) {\n      row.push(0);\n    }\n\n    board.push(row);\n  }\n}\n\nfunction startNewGame() {\n  alertElement.style.display = 'none';\n  tileContainer.innerHTML = '';\n  scoreElement.innerHTML = 0;\n\n  board = [];\n  score = 0;\n  wonGame = false;\n  window.addEventListener('keydown', onDirectionKeyPress);\n\n  createBoard();\n  addRandomTile();\n  addRandomTile();\n}\n\nfunction continuePlaying() {\n  alertElement.style.display = 'none';\n  window.addEventListener('keydown', onDirectionKeyPress);\n}\n\nwindow.addEventListener('keydown', onDirectionKeyPress);\n\nfunction onDirectionKeyPress(argument) {\n  let movePossible;\n\n  switch (argument.key) {\n    case DIRECTION_UP:\n      movePossible = moveTiles(1, 0);\n      break;\n\n    case DIRECTION_DOWN:\n      movePossible = moveTiles(-1, 0);\n      break;\n\n    case DIRECTION_LEFT:\n      movePossible = moveTiles(0, -1);\n      break;\n\n    case DIRECTION_RIGHT:\n      movePossible = moveTiles(0, 1);\n      break;\n  }\n\n  if (movePossible) {\n    addRandomTile();\n\n    const gameOver = isGameOver();\n\n    if (gameOver.gameOver) {\n      showAlert(gameOver.message);\n    }\n  }\n}\n\nfunction isWithinBounds(index, step, limit) {\n  return (index <= limit && step === 1) || (index >= 0 && step === -1);\n}\n\nfunction moveTiles(directionY, directionX) {\n  let movePossible = false;\n  let mergedRecently = false;\n\n  if (directionX !== 0) {\n    const startX = directionX === 1 ? 3 : 0;\n    const stepX = directionX === 1 ? -1 : 1;\n\n    for (let i = 0; i < 4; i++) {\n      let j = startX;\n\n      while (isWithinBounds(j, stepX, 3)) {\n        if (board[i][j] === 0) {\n          j += stepX;\n          continue;\n        }\n\n        const destination = getDestinationSquare(i, j, 0, directionX);\n        const tileClass = '.row' + (i + 1) + '.column' + (j + 1);\n        const tile = document.querySelector(tileClass);\n\n        if (!destination.merge || (destination.merge && mergedRecently)) {\n          mergedRecently = false;\n          destination.destinationX += destination.merge ? stepX : 0;\n          board[i][destination.destinationX] = board[i][j];\n\n          if (destination.destinationX !== j) {\n            movePossible = true;\n            board[i][j] = 0;\n          }\n          moveTileOnPage(i, destination.destinationX, tile, false);\n          j += stepX;\n          continue;\n        }\n\n        mergedRecently = true;\n\n        board[i][destination.destinationX] = board[i][j] * 2;\n        score += board[i][destination.destinationX];\n        scoreElement.innerHTML = score;\n        movePossible = true;\n        board[i][j] = 0;\n\n        moveTileOnPage(i, destination.destinationX, tile, destination.merge);\n        j += stepX;\n      }\n    }\n  } else if (directionY !== 0) {\n    const startY = directionY === 1 ? 3 : 0;\n    const stepY = directionY === 1 ? -1 : 1;\n\n    for (let j = 0; j < 4; j++) {\n      let i = startY;\n\n      while (isWithinBounds(i, stepY, 3)) {\n        if (board[i][j] === 0) {\n          i += stepY;\n          continue;\n        }\n\n        const destination = getDestinationSquare(i, j, directionY, 0);\n        const tileClass = '.row' + (i + 1) + '.column' + (j + 1);\n        const tile = document.querySelector(tileClass);\n\n        if (!destination.merge || (destination.merge && mergedRecently)) {\n          mergedRecently = false;\n          destination.destinationY += destination.merge ? stepY : 0;\n          board[destination.destinationY][j] = board[i][j];\n\n          if (destination.destinationY !== i) {\n            movePossible = true;\n            board[i][j] = 0;\n          }\n          moveTileOnPage(destination.destinationY, j, tile, false);\n          i += stepY;\n          continue;\n        }\n\n        mergedRecently = true;\n\n        board[destination.destinationY][j] = board[i][j] * 2;\n        score += board[destination.destinationY][j];\n        scoreElement.innerHTML = score;\n        movePossible = true;\n        board[i][j] = 0;\n\n        moveTileOnPage(destination.destinationY, j, tile, destination.merge);\n        i += stepY;\n      }\n    }\n  }\n\n  return movePossible;\n}\n\nfunction shouldContinue(direction, current, limit, merge) {\n  return (direction === 1 && current < limit && !merge)\n    || (direction === -1 && current > 0 && !merge);\n}\n\nfunction getDestinationSquare(i, j, directionY, directionX) {\n  let destinationY = i;\n  let destinationX = j;\n  let merge = false;\n\n  while (shouldContinue(directionY, destinationY, 3, merge)\n  || shouldContinue(directionX, destinationX, 3, merge)) {\n    const nextY = destinationY + directionY;\n    const nextX = destinationX + directionX;\n    const nextCell = board[nextY][nextX];\n    const currentCell = board[i][j];\n\n    if (merge) {\n      break;\n    }\n\n    if (nextCell === 0 || nextCell === currentCell) {\n      destinationY = nextY;\n      destinationX = nextX;\n      merge = nextCell === currentCell;\n    } else if (nextCell !== 0 && nextCell !== currentCell) {\n      break;\n    }\n  }\n\n  return {\n    merge,\n    destinationY,\n    destinationX,\n  };\n}\n\nfunction moveTileOnPage(row, column, tile, merge) {\n  const classes = Array.from(tile.classList);\n\n  classes.forEach((className) => {\n    if (className.startsWith('row') || className.startsWith('column')) {\n      tile.classList.remove(className);\n    }\n  });\n\n  tile.classList.add('row' + (row + 1), 'column' + (column + 1));\n\n  if (merge) {\n    let elements = tileContainer\n      .querySelectorAll('.row' + (row + 1) + '.column' + (column + 1));\n\n    while (elements.length > 1) {\n      tileContainer.removeChild(elements[0]);\n\n      elements = tileContainer\n        .querySelectorAll('.row' + (row + 1) + '.column' + (column + 1));\n    }\n\n    elements[0].className = 'tile '\n      + 'row' + (row + 1)\n      + ' column' + (column + 1)\n      + ' '\n      + 'value' + board[row][column];\n\n    elements[0].innerHTML = board[row][column];\n    elements[0].classList.add('merged');\n\n    elements[0].addEventListener(\n      'animationend',\n      () => tile.classList.remove('merged'),\n    );\n  }\n}\n\nfunction addTileToPage(row, column, value) {\n  const tile = document.createElement('div');\n\n  tile.classList.add(\n    'tile',\n    'row' + (row + 1),\n    'column' + (column + 1),\n    'value' + value,\n  );\n\n  tile.innerHTML = value;\n  tileContainer.appendChild(tile);\n  tile.classList.add('merged');\n\n  tile.addEventListener('animationend', () => tile.classList.remove('merged'));\n}\n\nfunction addRandomTile() {\n  const emptyTiles = [];\n\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board[i].length; j++) {\n      if (board[i][j] === 0) {\n        emptyTiles.push([i, j]);\n      }\n    }\n  }\n\n  const [randomI, randomJ]\n  = emptyTiles[Math.floor(Math.random() * emptyTiles.length)];\n\n  board[randomI][randomJ] = Math.random() < 0.9 ? 2 : 4;\n\n  addTileToPage(randomI, randomJ, board[randomI][randomJ]);\n}\n\nfunction isGameOver() {\n  let emptySquare = false;\n\n  for (let i = 0; i < board.length; i++) {\n    for (let j = 0; j < board[i].length; j++) {\n      if (board[i][j] === 0) {\n        emptySquare = true;\n      }\n\n      if (board[i][j] === 2048 && !wonGame) {\n        return {\n          gameOver: true, message: 'You won!',\n        };\n      }\n\n      if (j !== 3 && board[i][j] === board[i][j + 1]) {\n        emptySquare = true;\n      }\n\n      if (i !== 3 && board[i][j] === board[i + 1][j]) {\n        emptySquare = true;\n      }\n    }\n  }\n\n  if (emptySquare) {\n    return {\n      gameOver: false, message: '',\n    };\n  }\n\n  return {\n    gameOver: true, message: 'Game over!',\n  };\n}\n\nfunction createAlert(divText, buttons) {\n  const alertedElement = document.createElement('div');\n\n  alertElement.innerText = divText;\n\n  buttons.forEach((button) => {\n    const alertedButton = document.createElement('button');\n\n    alertedButton.innerText = button.text;\n    alertedButton.onclick = button.handler;\n\n    alertedElement.appendChild(alertedButton);\n  });\n\n  return alertedElement;\n}\n\nfunction showAlert(message) {\n  alertElement.innerHTML = '';\n\n  if (message === 'Game over!' || message === 'You won!') {\n    const buttons = [\n      {\n        text: message === 'Game over!' ? 'Try again' : 'New game',\n        handler: startNewGame,\n      },\n    ];\n\n    if (message === 'You won!') {\n      buttons.push({\n        text: 'Continue',\n        handler: continuePlaying,\n      });\n\n      wonGame = true;\n      window.removeEventListener('keydown', onDirectionKeyPress);\n    }\n\n    const alertDiv = createAlert(message, buttons);\n\n    alertElement.appendChild(alertDiv);\n  }\n\n  alertElement.style.display = 'flex';\n  alertElement.style.flexDirection = 'column';\n}\n"],"names":["$09e991522ca7e64e$var$board","$09e991522ca7e64e$var$score","$09e991522ca7e64e$var$wonGame","$09e991522ca7e64e$var$tileContainer","document","querySelector","$09e991522ca7e64e$var$scoreElement","getElementById","$09e991522ca7e64e$var$alertElement","$09e991522ca7e64e$var$createBoard","i","row","j","push","$09e991522ca7e64e$var$startNewGame","style","display","innerHTML","window","addEventListener","$09e991522ca7e64e$var$onDirectionKeyPress","$09e991522ca7e64e$var$addRandomTile","$09e991522ca7e64e$var$continuePlaying","argument","movePossible","key","$09e991522ca7e64e$var$moveTiles","gameOver","$09e991522ca7e64e$var$isGameOver","emptySquare","length","message","$09e991522ca7e64e$var$showAlert","buttons","text","handler","removeEventListener","alertDiv","$09e991522ca7e64e$var$createAlert","divText","alertedElement","createElement","innerText","forEach","button","alertedButton","onclick","appendChild","flexDirection","$09e991522ca7e64e$var$isWithinBounds","index","step","limit","directionY","directionX","mergedRecently","startX","stepX","destination","$09e991522ca7e64e$var$getDestinationSquare","tileClass","tile","merge","destinationX","$09e991522ca7e64e$var$moveTileOnPage","startY","stepY","destinationY","$09e991522ca7e64e$var$shouldContinue","direction","current","nextY","nextX","nextCell","currentCell","column","classes","Array","from","classList","className","startsWith","remove","add","elements","querySelectorAll","removeChild","emptyTiles","randomI","randomJ","Math","floor","random","$09e991522ca7e64e$var$addTileToPage","value"],"version":3,"file":"index.3c9e3d78.js.map"}